(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a6d2a86"],{"162e":function(e,r,o){"use strict";o("e23c")},a55b:function(e,r,o){"use strict";o.r(r);var s=function(){var e=this,r=e._self._c;return r("div",[r("div",{staticClass:"bodyContent body-flex"},[r("el-card",{staticClass:"login-form",scopedSlots:e._u([{key:"header",fn:function(){return[e._v("登录")]},proxy:!0}])},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:""},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("登录")]),r("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1),r("el-card",{staticClass:"reg-form",scopedSlots:e._u([{key:"header",fn:function(){return[e._v("注册")]},proxy:!0}])},[r("el-form",{ref:"ruleFormReg",attrs:{model:e.ruleFormReg,rules:e.rulesReg}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{placeholder:""},model:{value:e.ruleFormReg.username,callback:function(r){e.$set(e.ruleFormReg,"username",r)},expression:"ruleFormReg.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:""},model:{value:e.ruleFormReg.password,callback:function(r){e.$set(e.ruleFormReg,"password",r)},expression:"ruleFormReg.password"}})],1),r("el-form-item",{attrs:{label:"再次输入密码",prop:"password2"}},[r("el-input",{attrs:{type:"password",placeholder:""},model:{value:e.ruleFormReg.password2,callback:function(r){e.$set(e.ruleFormReg,"password2",r)},expression:"ruleFormReg.password2"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitFormReg("ruleFormReg")}}},[e._v("注册")]),r("el-button",{on:{click:function(r){return e.resetFormReg("ruleFormReg")}}},[e._v("重置")])],1)],1)],1)],1),r("div",{staticClass:"footer"})])},t=[];o("14d9");function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidCharacterError";var l="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var r=String(e).replace(/=+$/,"");if(r.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,s,t=0,l=0,n="";s=r.charAt(l++);~s&&(o=t%4?64*o+s:s,t++%4)?n+=String.fromCharCode(255&o>>(-2*t&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return n};function n(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(l(e).replace(/(.)/g,(function(e,r){var o=r.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o})))}(r)}catch(e){return l(r)}}function u(e){this.message=e}function i(e,r){if("string"!=typeof e)throw new u("Invalid token specified");var o=!0===(r=r||{}).header?0:1;try{return JSON.parse(n(e.split(".")[o]))}catch(e){throw new u("Invalid token specified: "+e.message)}}u.prototype=new Error,u.prototype.name="InvalidTokenError";var m=i,c=o("b775"),p={data(){return{ruleForm:{username:"",password:""},ruleFormReg:{username:"",password:"",password2:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},rulesReg:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],password2:[{required:!0,message:"请再次输入密码",trigger:"blur"}]}}},methods:{submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;console.log("submit:"),c["a"].post("/api/user/account/login",{},{params:this.ruleForm}).then(e=>{console.log("login res:",e),this.$message({showClose:!0,message:"登录成功",type:"success"});const r=m(e.token);console.log("obj:",r),localStorage.setItem("token",e.token),localStorage.setItem("userid",r.sub),localStorage.setItem("username",this.ruleForm.username),this.$store.commit("updateToken",e.token),this.$router.push("/")})})},resetForm(e){this.$refs[e].resetFields()},submitFormReg(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;this.ruleFormReg.password==this.ruleFormReg.password2?c["a"].post("/api/user",{},{params:this.ruleFormReg}).then(e=>{this.$message({showClose:!0,message:"恭喜你，注册成功",type:"success"}),console.log("reg res:",e)}):this.$message.error("两次密码不一致，请重新输入")})},resetFormReg(e){this.$refs[e].resetFields()}}},d=p,g=(o("162e"),o("2877")),f=Object(g["a"])(d,s,t,!1,null,null,null);r["default"]=f.exports},e23c:function(e,r,o){}}]);
//# sourceMappingURL=chunk-5a6d2a86.bedfb5df.js.map