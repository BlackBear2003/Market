{"version":3,"sources":["webpack:///./src/views/Login.vue?82aa","webpack:///./src/views/Login.vue","webpack:///./node_modules/jwt-decode/build/jwt-decode.esm.js","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?66fe","webpack:///./src/views/Login.vue?b6b6"],"names":["render","_vm","this","_c","_self","staticClass","scopedSlots","_u","key","fn","_v","proxy","ref","attrs","ruleForm","rules","model","value","username","callback","$$v","$set","expression","password","on","$event","submitForm","resetForm","ruleFormReg","rulesReg","password2","submitFormReg","resetFormReg","staticRenderFns","e","message","prototype","Error","name","r","window","atob","bind","t","String","replace","length","n","o","a","i","c","charAt","fromCharCode","indexOf","decodeURIComponent","charCodeAt","toString","toUpperCase","header","JSON","parse","split","data","required","trigger","methods","console","http","post","params","then","showClose","type","localStorage","component"],"mappings":"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","file":"js/chunk-5a6d2a86.bedfb5df.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=56a45e65&prod&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"bodyContent body-flex\"},[_c('el-card',{staticClass:\"login-form\",scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_vm._v(\"登录\")]},proxy:true}])},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.ruleForm.username),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"username\", $$v)},expression:\"ruleForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"\"},model:{value:(_vm.ruleForm.password),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"password\", $$v)},expression:\"ruleForm.password\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"登录\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")])],1)],1)],1),_c('el-card',{staticClass:\"reg-form\",scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_vm._v(\"注册\")]},proxy:true}])},[_c('el-form',{ref:\"ruleFormReg\",attrs:{\"model\":_vm.ruleFormReg,\"rules\":_vm.rulesReg}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.ruleFormReg.username),callback:function ($$v) {_vm.$set(_vm.ruleFormReg, \"username\", $$v)},expression:\"ruleFormReg.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"\"},model:{value:(_vm.ruleFormReg.password),callback:function ($$v) {_vm.$set(_vm.ruleFormReg, \"password\", $$v)},expression:\"ruleFormReg.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"再次输入密码\",\"prop\":\"password2\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"\"},model:{value:(_vm.ruleFormReg.password2),callback:function ($$v) {_vm.$set(_vm.ruleFormReg, \"password2\", $$v)},expression:\"ruleFormReg.password2\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitFormReg('ruleFormReg')}}},[_vm._v(\"注册\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetFormReg('ruleFormReg')}}},[_vm._v(\"重置\")])],1)],1)],1)],1),_c('div',{staticClass:\"footer\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","function e(e){this.message=e}e.prototype=new Error,e.prototype.name=\"InvalidCharacterError\";var r=\"undefined\"!=typeof window&&window.atob&&window.atob.bind(window)||function(r){var t=String(r).replace(/=+$/,\"\");if(t.length%4==1)throw new e(\"'atob' failed: The string to be decoded is not correctly encoded.\");for(var n,o,a=0,i=0,c=\"\";o=t.charAt(i++);~o&&(n=a%4?64*n+o:o,a++%4)?c+=String.fromCharCode(255&n>>(-2*a&6)):0)o=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(o);return c};function t(e){var t=e.replace(/-/g,\"+\").replace(/_/g,\"/\");switch(t.length%4){case 0:break;case 2:t+=\"==\";break;case 3:t+=\"=\";break;default:throw\"Illegal base64url string!\"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,r){var t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t=\"0\"+t),\"%\"+t})))}(t)}catch(e){return r(t)}}function n(e){this.message=e}function o(e,r){if(\"string\"!=typeof e)throw new n(\"Invalid token specified\");var o=!0===(r=r||{}).header?0:1;try{return JSON.parse(t(e.split(\".\")[o]))}catch(e){throw new n(\"Invalid token specified: \"+e.message)}}n.prototype=new Error,n.prototype.name=\"InvalidTokenError\";export default o;export{n as InvalidTokenError};\n//# sourceMappingURL=jwt-decode.esm.js.map\n","<template>\r\n  <div>\r\n    <div class=\"bodyContent body-flex\">\r\n      <!-- 登录 -->\r\n      <el-card class=\"login-form\">\r\n        <template #header>登录</template>\r\n        <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\">\r\n          <el-form-item label=\"用户名\" prop=\"username\">\r\n            <el-input v-model=\"ruleForm.username\" placeholder=\"\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"密码\" prop=\"password\">\r\n            <el-input\r\n              type=\"password\"\r\n              v-model=\"ruleForm.password\"\r\n              placeholder=\"\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\r\n              >登录</el-button\r\n            >\r\n            <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-card>\r\n      <!-- 注册 -->\r\n      <el-card class=\"reg-form\">\r\n        <template #header>注册</template>\r\n\r\n        <el-form :model=\"ruleFormReg\" :rules=\"rulesReg\" ref=\"ruleFormReg\">\r\n          <el-form-item label=\"用户名\" prop=\"username\">\r\n            <el-input v-model=\"ruleFormReg.username\" placeholder=\"\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"密码\" prop=\"password\">\r\n            <el-input\r\n              type=\"password\"\r\n              v-model=\"ruleFormReg.password\"\r\n              placeholder=\"\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"再次输入密码\" prop=\"password2\">\r\n            <el-input\r\n              type=\"password\"\r\n              v-model=\"ruleFormReg.password2\"\r\n              placeholder=\"\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"submitFormReg('ruleFormReg')\"\r\n              >注册</el-button\r\n            >\r\n            <el-button @click=\"resetFormReg('ruleFormReg')\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-card>\r\n    </div>\r\n    <div class=\"footer\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nimport http from \"@/utils/request.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        username: \"\",\r\n        password: \"\",\r\n      },\r\n      ruleFormReg: {\r\n        username: \"\",\r\n        password: \"\",\r\n        password2: \"\",\r\n      },\r\n      rules: {\r\n        username: [\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n        ],\r\n        password: [{ required: true, message: \"请输入密码\", trigger: \"blur\" }],\r\n      },\r\n      rulesReg: {\r\n        username: [\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n        ],\r\n        password: [{ required: true, message: \"请输入密码\", trigger: \"blur\" }],\r\n        password2: [\r\n          { required: true, message: \"请再次输入密码\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          console.log(\"submit:\");\r\n          http\r\n            .post(\"/api/user/account/login\", {}, { params: this.ruleForm })\r\n            .then((res) => {\r\n              console.log(\"login res:\", res);\r\n              this.$message({\r\n                showClose: true,\r\n                message: \"登录成功\",\r\n                type: \"success\",\r\n              });\r\n              const obj = jwt_decode(res.token);\r\n              console.log(\"obj:\", obj);\r\n              localStorage.setItem(\"token\", res.token);\r\n              localStorage.setItem(\"userid\", obj.sub);\r\n              localStorage.setItem(\"username\", this.ruleForm.username);\r\n              this.$store.commit('updateToken', res.token)\r\n              this.$router.push(\"/\");\r\n            });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n\r\n    submitFormReg(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if (this.ruleFormReg.password != this.ruleFormReg.password2) {\r\n            this.$message.error(\"两次密码不一致，请重新输入\");\r\n            return;\r\n          }\r\n          http\r\n            .post(\"/api/user\", {}, { params: this.ruleFormReg })\r\n            .then((res) => {\r\n              this.$message({\r\n                showClose: true,\r\n                message: \"恭喜你，注册成功\",\r\n                type: \"success\",\r\n              });\r\n              console.log(\"reg res:\", res);\r\n            });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    resetFormReg(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n@import \"../components/styles/main.less\";\r\n.body-flex {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  .login-form,\r\n  .reg-form {\r\n    flex: 45%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=56a45e65&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=56a45e65&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}